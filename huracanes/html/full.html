<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title></title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.37.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.37.0/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>

  <style>

    #menu {
        background: #fff;
        position: absolute;
        z-index: 1;
        top: 10px;
        right: 10px;
        border-radius: 3px;
        width: 120px;
        border: 1px solid rgba(0,0,0,0.4);
        font-family: 'Open Sans', sans-serif;
    }

    #menu a {
        font-size: 13px;
        color: #404040;
        display: block;
        margin: 0;
        padding: 0;
        padding: 10px;
        text-decoration: none;
        border-bottom: 1px solid rgba(0,0,0,0.25);
        text-align: center;
    }

    #menu a:last-child {
        border: none;
    }

    #menu a:hover {
        background-color: #f8f8f8;
        color: #404040;
    }

    #menu a.active {
        background-color: #3887be;
        color: #ffffff;
    }

    #menu a.active:hover {
        background: #3074a4;
    }

.legend {
    background-color: #fff;
    border-radius: 3px;
    bottom: 30px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.10);
    font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
    padding: 10px;
    position: absolute;
    right: 10px;
    z-index: 1;
}

.legend h4 {
    margin: 0 0 10px;
}

.legend div span {
    border-radius: 50%;
    display: inline-block;
    height: 10px;
    margin-right: 5px;
    width: 10px;
}

.add_info {
    background-color: #fff;
    border-radius: 3px;
    bottom: 30px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.10);
    font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
    padding: 10px;
    position: absolute;
    left: 10px;
    z-index: 1;
}


  </style>

<nav id="menu"></nav>
<div id='map'></div>


<div id='inun-legend' class='legend'>
  <h4>Código de colores</h4>
  <div><span style='background-color: #FFEB3B'></span>Riesgo inundación: ND</div>
  <div><span style='background-color: #FF9800'></span>Riesgo inundación: Medio</div>
  <div><span style='background-color: #D50000'></span>Riesgo inundación: Alto</div>
  <div><span style='background-color: #0D47A1'></span>Riesgo deslizamiento</div>
  <div><span style='background-color: #64DD17'></span>Polígono de riesgo</div>
</div>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiZ29ibXgxNSIsImEiOiJjaWZpaTl2eGtibDBjcnNtN3NqdW1wN25xIn0.yxAJmrmgXO_IaXuI1lckYA';

var v1 = new mapboxgl.LngLat(-99.137084, 19.426472);

var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v9',
    zoom: 4,
    center: v1
});

map.on('load', () => {

//Inundaciones
  map.addSource("inundaciones", {
        "type": "geojson",
        "data": "https://raw.githubusercontent.com/lromang/lromang.github.io/master/huracanes/inter_data/flod_inside.geojson"
  });


   map.addLayer({
'id': 'inundaciones',
        'type': 'fill',
        'source': 'inundaciones',
        'layout': {},
        'paint': {
'fill-color': {
'property': 'VULNERABIL',
'type':'categorical',
stops: [['ND', '#FFEB3B'],
['MEDIA', '#FF9800'],
['ALTA', '#D50000']]
},
            'fill-opacity': 0.6
        }
},'waterway-label');

  map.addLayer({
        'id': 'inundaciones-contorno',
        'type': 'line',
        'source': 'inundaciones',
        'layout': {},
        'paint': {
            'line-color': '#fff',
            'line-width': 1
        }
});


// --------------------------------------------------

//Hospitales
  map.addSource("hospitales", {
        "type": "geojson",
        "data": "https://raw.githubusercontent.com/lromang/lromang.github.io/master/huracanes/inter_data/hospital_inside.geojson"
  });

map.loadImage('https://raw.githubusercontent.com/lromang/lromang.github.io/master/huracanes/images/hospitales.png', (error, image) => {
        if (error) throw error;
        map.addImage('hospital', image);
map.addLayer({
'id': 'hospitales',
'type':'symbol',
'source':'hospitales',
'layout':{"icon-image": "hospital", "icon-size": 0.02}
})})



// --------------------------------------------------

//Deslizamientos  laderas
  map.addSource("laderas", {
        "type": "geojson",
        "data": "https://raw.githubusercontent.com/lromang/lromang.github.io/master/huracanes/inter_data/glide_inside.geojson"
  });


   map.addLayer({
'id': 'laderas',
        'type': 'fill',
        'source': 'laderas',
        'layout': {},
        'paint': {
            'fill-color': '#0D47A1',
            'fill-opacity': 0.5
        }
});

    map.loadImage('https://raw.githubusercontent.com/lromang/lromang.github.io/master/huracanes/images/refugio_activo.png', (error, image) => {
        if (error) throw error;
        map.addImage('shelter', image);
        map.addLayer({
            "id": "points",
            "type": "symbol",
            "source": {
                "type": "geojson",
                "data": {
                    "type": "FeatureCollection",
                    "features": [

{"type": "Feature","properties":{"id":  0 , "nomin": "ESCUELA PRIMARIA MIGUEL HIDALGO Y COSTILLA" , "tipovial":  "" , "nomvial":  "UBICADO EN AGUAZARCA EN LA CALLE PRINCIPAL" , "nomasen":  "" , "nomloc":   "" , "nommun":  "VILLA DE TUTUTEPEC DE MELCHOR OCAMPO" , "noment":  "Oaxaca" , "description": "<strong>Refugio:</strong><p>ESCUELA PRIMARIA MIGUEL HIDALGO Y COSTILLA</p><strong>Vialidad:</strong><p>UBICADO EN AGUAZARCA EN LA CALLE PRINCIPAL</p><strong>Asentamiento:</strong><p></p><strong>Localidad:</strong><p></p><strong>Tipo vialidad:</strong><p></p>"}, "geometry": { "type": "Point","coordinates": [ -96.979095 , 17.772989 ]}},
{"type": "Feature","properties":{"id":  1 , "nomin": "ESCUELA SECUNDARIA #52" , "tipovial":  "" , "nomvial":  "UBICADA EN PUERTO ANGEL COLONIA PUENTE TURBO" , "nomasen":  "" , "nomloc":   "" , "nommun":  "SAN PEDRO POCHUTLA" , "noment":  "Oaxaca" , "description": "<strong>Refugio:</strong><p>ESCUELA SECUNDARIA #52</p><strong>Vialidad:</strong><p>UBICADA EN PUERTO ANGEL COLONIA PUENTE TURBO</p><strong>Asentamiento:</strong><p></p><strong>Localidad:</strong><p></p><strong>Tipo vialidad:</strong><p></p>"}, "geometry": { "type": "Point","coordinates": [ -96.50172201 , 15.6653555 ]}},
{"type": "Feature","properties":{"id":  2 , "nomin": "PISTA BUGAMBILIAS UBICADO EN DIAGONAL IGNACIO DE LA LLAVE" , "tipovial":  "" , "nomvial":  "UBICADO EN DIAGONAL IGNACIO DE LA LLAVE" , "nomasen":  "" , "nomloc":   "" , "nommun":  "ACATLAN DE PEREZ FIGUEROA" , "noment":  "Oaxaca" , "description": "<strong>Refugio:</strong><p>PISTA BUGAMBILIAS UBICADO EN DIAGONAL IGNACIO DE LA LLAVE</p><strong>Vialidad:</strong><p>UBICADO EN DIAGONAL IGNACIO DE LA LLAVE</p><strong>Asentamiento:</strong><p></p><strong>Localidad:</strong><p></p><strong>Tipo vialidad:</strong><p></p>"}, "geometry": { "type": "Point","coordinates": [ -96.607729 , 18.537822 ]}},
{"type": "Feature","properties":{"id":  3 , "nomin": "SALON CNPR" , "tipovial":  "" , "nomvial":  "DOMICILIO CONOCIDO CENTRO DE LA POBLACIÃƒâ€œN" , "nomasen":  "" , "nomloc":   "" , "nommun":  "ACATLAN DE PEREZ FIGUEROA" , "noment":  "Oaxaca" , "description": "<strong>Refugio:</strong><p>SALON CNPR</p><strong>Vialidad:</strong><p>DOMICILIO CONOCIDO CENTRO DE LA POBLACIÃƒâ€œN</p><strong>Asentamiento:</strong><p></p><strong>Localidad:</strong><p></p><strong>Tipo vialidad:</strong><p></p>"}, "geometry": { "type": "Point","coordinates": [ -96.53486802 , 18.511829 ]}},
{"type": "Feature","properties":{"id":  4 , "nomin": "SALON EJIDAL" , "tipovial":  "" , "nomvial":  "DOMICILIO CONOCIDO CENTRO DE LA POBLACIÃƒâ€œN" , "nomasen":  "" , "nomloc":   "" , "nommun":  "ACATLAN DE PEREZ FIGUEROA" , "noment":  "Oaxaca" , "description": "<strong>Refugio:</strong><p>SALON EJIDAL</p><strong>Vialidad:</strong><p>DOMICILIO CONOCIDO CENTRO DE LA POBLACIÃƒâ€œN</p><strong>Asentamiento:</strong><p></p><strong>Localidad:</strong><p></p><strong>Tipo vialidad:</strong><p></p>"}, "geometry": { "type": "Point","coordinates": [ -96.457085 , 18.504697 ]}},
{"type": "Feature","properties":{"id":  5 , "nomin": "SALON EJIDAL" , "tipovial":  "" , "nomvial":  "DOMICILIO CONOCIDO CENTRO DE LA POBLACIÃƒâ€œN" , "nomasen":  "" , "nomloc":   "" , "nommun":  "ACATLAN DE PEREZ FIGUEROA" , "noment":  "Oaxaca" , "description": "<strong>Refugio:</strong><p>SALON EJIDAL</p><strong>Vialidad:</strong><p>DOMICILIO CONOCIDO CENTRO DE LA POBLACIÃƒâ€œN</p><strong>Asentamiento:</strong><p></p><strong>Localidad:</strong><p></p><strong>Tipo vialidad:</strong><p></p>"}, "geometry": { "type": "Point","coordinates": [ -96.598012 , 18.392537 ]}},
{"type": "Feature","properties":{"id":  6 , "nomin": "SALON EJIDAL" , "tipovial":  "" , "nomvial":  "DOMICILIO CONOCIDO CENTRO DE LA POBLACIÃƒâ€œN" , "nomasen":  "" , "nomloc":   "" , "nommun":  "ACATLAN DE PEREZ FIGUEROA" , "noment":  "Oaxaca" , "description": "<strong>Refugio:</strong><p>SALON EJIDAL</p><strong>Vialidad:</strong><p>DOMICILIO CONOCIDO CENTRO DE LA POBLACIÃƒâ€œN</p><strong>Asentamiento:</strong><p></p><strong>Localidad:</strong><p></p><strong>Tipo vialidad:</strong><p></p>"}, "geometry": { "type": "Point","coordinates": [ -96.5877 , 18.53246 ]}},
{"type": "Feature","properties":{"id":  7 , "nomin": "SALON EJIDAL" , "tipovial":  "" , "nomvial":  "DOMICILIO CONOCIDO CENTRO DE LA POBLACIÃƒâ€œN" , "nomasen":  "" , "nomloc":   "" , "nommun":  "ACATLAN DE PEREZ FIGUEROA" , "noment":  "Oaxaca" , "description": "<strong>Refugio:</strong><p>SALON EJIDAL</p><strong>Vialidad:</strong><p>DOMICILIO CONOCIDO CENTRO DE LA POBLACIÃƒâ€œN</p><strong>Asentamiento:</strong><p></p><strong>Localidad:</strong><p></p><strong>Tipo vialidad:</strong><p></p>"}, "geometry": { "type": "Point","coordinates": [ -96.57266 , 18.51034 ]}},
{"type": "Feature","properties":{"id":  8 , "nomin": "AUDITORIO BENITO JUAREZ" , "tipovial":  "" , "nomvial":  "UBICADO EN LA CARRETERA QUE LOMA BONITA OAXACA A PLAYA VICENTRE VER." , "nomasen":  "" , "nomloc":   "" , "nommun":  "LOMA BONITA" , "noment":  "Oaxaca" , "description": "<strong>Refugio:</strong><p>AUDITORIO BENITO JUAREZ</p><strong>Vialidad:</strong><p>UBICADO EN LA CARRETERA QUE LOMA BONITA OAXACA A PLAYA VICENTRE VER.</p><strong>Asentamiento:</strong><p></p><strong>Localidad:</strong><p></p><strong>Tipo vialidad:</strong><p></p>"}, "geometry": { "type": "Point","coordinates": [ -95.897526 , 18.099377 ]}},
{"type": "Feature","properties":{"id":  9 , "nomin": "LA UNIDAD BÃƒÂSICA DE REHABILITACIÃƒâ€œN LLAMADA UBR" , "tipovial":  "" , "nomvial":  "UBICADA EN LACALLE PRINCIPAL DE LA COLONIA ARBOLEDA" , "nomasen":  "" , "nomloc":   "" , "nommun":  "LOMA BONITA" , "noment":  "Oaxaca" , "description": "<strong>Refugio:</strong><p>LA UNIDAD BÃƒÂSICA DE REHABILITACIÃƒâ€œN LLAMADA UBR</p><strong>Vialidad:</strong><p>UBICADA EN LACALLE PRINCIPAL DE LA COLONIA ARBOLEDA</p><strong>Asentamiento:</strong><p></p><strong>Localidad:</strong><p></p><strong>Tipo vialidad:</strong><p></p>"}, "geometry": { "type": "Point","coordinates": [ -95.88977 , 18.10372 ]}},
{"type": "Feature","properties":{"id":  10 , "nomin": "CASA DE DIAZ" , "tipovial":  "" , "nomvial":  "UBICADA EN AVE. FERROCARRIL ENTRE TAMAULIPAS Y MICHOACAN" , "nomasen":  "" , "nomloc":   "" , "nommun":  "LOMA BONITA" , "noment":  "Oaxaca" , "description": "<strong>Refugio:</strong><p>CASA DE DIAZ</p><strong>Vialidad:</strong><p>UBICADA EN AVE. FERROCARRIL ENTRE TAMAULIPAS Y MICHOACAN</p><strong>Asentamiento:</strong><p></p><strong>Localidad:</strong><p></p><strong>Tipo vialidad:</strong><p></p>"}, "geometry": { "type": "Point","coordinates": [ -95.884072 , 18.108353 ]}},
{"type": "Feature","properties":{"id":  11 , "nomin": "SALON SOCIAL" , "tipovial":  "" , "nomvial":  "UBICADO EN LA AVE. MICHOACAN ENTRE 16 DE SEPTIEMBRE Y LA CALLE MEXICO" , "nomasen":  "" , "nomloc":   "" , "nommun":  "LOMA BONITA" , "noment":  "Oaxaca" , "description": "<strong>Refugio:</strong><p>SALON SOCIAL</p><strong>Vialidad:</strong><p>UBICADO EN LA AVE. MICHOACAN ENTRE 16 DE SEPTIEMBRE Y LA CALLE MEXICO</p><strong>Asentamiento:</strong><p></p><strong>Localidad:</strong><p></p><strong>Tipo vialidad:</strong><p></p>"}, "geometry": { "type": "Point","coordinates": [ -95.884072 , 18.108353 ]}},
{"type": "Feature","properties":{"id":  12 , "nomin": "SALON DE USOS MULTIPLES" , "tipovial":  "" , "nomvial":  "UBICADO EN LA COLONIA ARBOLEDA S/N" , "nomasen":  "" , "nomloc":   "" , "nommun":  "LOMA BONITA" , "noment":  "Oaxaca" , "description": "<strong>Refugio:</strong><p>SALON DE USOS MULTIPLES</p><strong>Vialidad:</strong><p>UBICADO EN LA COLONIA ARBOLEDA S/N</p><strong>Asentamiento:</strong><p></p><strong>Localidad:</strong><p></p><strong>Tipo vialidad:</strong><p></p>"}, "geometry": { "type": "Point","coordinates": [ -95.890127 , 18.101659 ]}},
{"type": "Feature","properties":{"id":  13 , "nomin": "SALON DE USOS MULTIPLES" , "tipovial":  "" , "nomvial":  "UBICADO EN LA CALLE PRINCIPAL DE LA COLONIA EMILIANO ZAPATA" , "nomasen":  "" , "nomloc":   "" , "nommun":  "LOMA BONITA" , "noment":  "Oaxaca" , "description": "<strong>Refugio:</strong><p>SALON DE USOS MULTIPLES</p><strong>Vialidad:</strong><p>UBICADO EN LA CALLE PRINCIPAL DE LA COLONIA EMILIANO ZAPATA</p><strong>Asentamiento:</strong><p></p><strong>Localidad:</strong><p></p><strong>Tipo vialidad:</strong><p></p>"}, "geometry": { "type": "Point","coordinates": [ -95.883735 , 18.119736 ]}},
{"type": "Feature","properties":{"id":  14 , "nomin": "SALON DE USOS MULTIPLES" , "tipovial":  "" , "nomvial":  "UBICADO EN LA COLONIA INDEPENDENCIA S/N" , "nomasen":  "" , "nomloc":   "" , "nommun":  "LOMA BONITA" , "noment":  "Oaxaca" , "description": "<strong>Refugio:</strong><p>SALON DE USOS MULTIPLES</p><strong>Vialidad:</strong><p>UBICADO EN LA COLONIA INDEPENDENCIA S/N</p><strong>Asentamiento:</strong><p></p><strong>Localidad:</strong><p></p><strong>Tipo vialidad:</strong><p></p>"}, "geometry": { "type": "Point","coordinates": [ -95.885386 , 18.12036 ]}},
{"type": "Feature","properties":{"id":  15 , "nomin": "AUDITORIO DEL PARQUE SAN MIGUEL" , "tipovial":  "" , "nomvial":  "COL. SAN MIGUEL AN FELIPE USILA" , "nomasen":  "" , "nomloc":   "" , "nommun":  "SAN FELIPE USILA" , "noment":  "Oaxaca" , "description": "<strong>Refugio:</strong><p>AUDITORIO DEL PARQUE SAN MIGUEL</p><strong>Vialidad:</strong><p>COL. SAN MIGUEL AN FELIPE USILA</p><strong>Asentamiento:</strong><p></p><strong>Localidad:</strong><p></p><strong>Tipo vialidad:</strong><p></p>"}, "geometry": { "type": "Point","coordinates": [ -96.524517 , 17.887658 ]}},
{"type": "Feature","properties":{"id":  16 , "nomin": "ESCUELA PRIMARIA BENITO JUAREZ" , "tipovial":  "" , "nomvial":  "COL. SAN JACINTO" , "nomasen":  "" , "nomloc":   "" , "nommun":  "SAN FELIPE USILA" , "noment":  "Oaxaca" , "description": "<strong>Refugio:</strong><p>ESCUELA PRIMARIA BENITO JUAREZ</p><strong>Vialidad:</strong><p>COL. SAN JACINTO</p><strong>Asentamiento:</strong><p></p><strong>Localidad:</strong><p></p><strong>Tipo vialidad:</strong><p></p>"}, "geometry": { "type": "Point","coordinates": [ -96.528543 , 17.88622897 ]}},
{"type": "Feature","properties":{"id":  17 , "nomin": "PALACIO MUNICIPAL" , "tipovial":  "" , "nomvial":  "COLONIA BARRIO CHICO" , "nomasen":  "" , "nomloc":   "" , "nommun":  "SAN FELIPE USILA" , "noment":  "Oaxaca" , "description": "<strong>Refugio:</strong><p>PALACIO MUNICIPAL</p><strong>Vialidad:</strong><p>COLONIA BARRIO CHICO</p><strong>Asentamiento:</strong><p></p><strong>Localidad:</strong><p></p><strong>Tipo vialidad:</strong><p></p>"}, "geometry": { "type": "Point","coordinates": [ -96.528466 , 17.879235 ]}},
{"type": "Feature","properties":{"id":  18 , "nomin": "ESCUELA SECUNDARIA TECNICA 110" , "tipovial":  "" , "nomvial":  "COLONIA AEROPUERTO" , "nomasen":  "" , "nomloc":   "" , "nommun":  "SAN FELIPE USILA" , "noment":  "Oaxaca" , "description": "<strong>Refugio:</strong><p>ESCUELA SECUNDARIA TECNICA 110</p><strong>Vialidad:</strong><p>COLONIA AEROPUERTO</p><strong>Asentamiento:</strong><p></p><strong>Localidad:</strong><p></p><strong>Tipo vialidad:</strong><p></p>"}, "geometry": { "type": "Point","coordinates": [ -96.520318 , 17.88938501 ]}},
{"type": "Feature","properties":{"id":  19 , "nomin": "SALON BICENTENARIO" , "tipovial":  "" , "nomvial":  "UBICADO EN LA CALLE MORELOS S/N." , "nomasen":  "" , "nomloc":   "" , "nommun":  "SAN JOSE CHILTEPEC" , "noment":  "Oaxaca" , "description": "<strong>Refugio:</strong><p>SALON BICENTENARIO</p><strong>Vialidad:</strong><p>UBICADO EN LA CALLE MORELOS S/N.</p><strong>Asentamiento:</strong><p></p><strong>Localidad:</strong><p></p><strong>Tipo vialidad:</strong><p></p>"}, "geometry": { "type": "Point","coordinates": [ -96.168146 , 17.946954 ]}},
{"type": "Feature","properties":{"id":  20 , "nomin": "ESCUELA PRIMARIA REVOLUCIÃƒâ€œN" , "tipovial":  "" , "nomvial":  "UBICADA EN LA CALLE PINO SUAREZ ESQ. CON HIDALGO S/N" , "nomasen":  "" , "nomloc":   "" , "nommun":  "SAN JOSE CHILTEPEC" , "noment":  "Oaxaca" , "description": "<strong>Refugio:</strong><p>ESCUELA PRIMARIA REVOLUCIÃƒâ€œN</p><strong>Vialidad:</strong><p>UBICADA EN LA CALLE PINO SUAREZ ESQ. CON HIDALGO S/N</p><strong>Asentamiento:</strong><p></p><strong>Localidad:</strong><p></p><strong>Tipo vialidad:</strong><p></p>"}, "geometry": { "type": "Point","coordinates": [ -96.170557 , 17.947582 ]}},
{"type": "Feature","properties":{"id":  21 , "nomin": "IGLESIA DE LA POBLACIÃƒâ€œN" , "tipovial":  "" , "nomvial":  "UBICADA EN LA CALLE HIDEALGO CENTRO" , "nomasen":  "" , "nomloc":   "" , "nommun":  "SAN JOSE CHILTEPEC" , "noment":  "Oaxaca" , "description": "<strong>Refugio:</strong><p>IGLESIA DE LA POBLACIÃƒâ€œN</p><strong>Vialidad:</strong><p>UBICADA EN LA CALLE HIDEALGO CENTRO</p><strong>Asentamiento:</strong><p></p><strong>Localidad:</strong><p></p><strong>Tipo vialidad:</strong><p></p>"}, "geometry": { "type": "Point","coordinates": [ -96.169902 , 17.945599 ]}},
{"type": "Feature","properties":{"id":  22 , "nomin": "SALON SOCIAL TEMAZCALTEZI" , "tipovial":  "" , "nomvial":  "JUNTO AL PARQUE JUAREZ CENTRO DE LA POBLACION" , "nomasen":  "" , "nomloc":   "" , "nommun":  "SAN MIGUEL SOYALTEPEC" , "noment":  "Oaxaca" , "description": "<strong>Refugio:</strong><p>SALON SOCIAL TEMAZCALTEZI</p><strong>Vialidad:</strong><p>JUNTO AL PARQUE JUAREZ CENTRO DE LA POBLACION</p><strong>Asentamiento:</strong><p></p><strong>Localidad:</strong><p></p><strong>Tipo vialidad:</strong><p></p>"}, "geometry": { "type": "Point","coordinates": [ -96.403172 , 18.239831 ]}},
{"type": "Feature","properties":{"id":  23 , "nomin": "GALERA DE USOS MULTIPLES TECHADA" , "tipovial":  "" , "nomvial":  "UBICADA EN BARRIOLA SOLEDAD" , "nomasen":  "" , "nomloc":   "" , "nommun":  "VILLA SOLA DE VEGA" , "noment":  "Oaxaca" , "description": "<strong>Refugio:</strong><p>GALERA DE USOS MULTIPLES TECHADA</p><strong>Vialidad:</strong><p>UBICADA EN BARRIOLA SOLEDAD</p><strong>Asentamiento:</strong><p></p><strong>Localidad:</strong><p></p><strong>Tipo vialidad:</strong><p></p>"}, "geometry": { "type": "Point","coordinates": [ -96.98475928 , 16.51378 ]}}
]}},"layout": {"icon-image": "shelter", "icon-size": 0.12}});});
map.addLayer({
        "id": "dangerZone","type": "fill","source": {"type": "geojson", "data": {"type": "Feature","geometry": {"type": "Polygon","coordinates":[[
[-97.75634765625,23.28171917560002],
[-100.48095703125,23.200960808078566],
[-99.42626953125,20.632784250388028],
[-98.15185546875,19.725342248057867],
[-97.31689453125,18.104087015773956],
[-96.48193359375,17.18277905643184],
[-94.94384765625,17.5602465032949],
[-94.81201171875,18.562947442888312],
[-96.70166015625,19.973348786110602],
[-97.75634765625,23.28171917560002]
]]}}},"layout": {},"paint": {"fill-color": "#64DD17","fill-opacity": 0.8}});});

var popup = new mapboxgl.Popup({
        closeButton: false,
        closeOnClick: false
    });

map.on('mouseenter', 'hospitales', function(e){
map.getCanvas().style.cursor = 'pointer';
popup.setLngLat(e.features[0].geometry.coordinates)
.setHTML(e.features[0].properties.nom_estab + '\n' + e.features[0].properties.per_ocu + '\n' + e.features[0].properties.nom_vial + '\n' +  e.features[0].properties.numero_ext)
.addTo(map);
});

map.on('mouseleave', 'hospitales', function(){
        map.getCanvas().style.cursor = '';
        popup.remove();
})

    map.on('mouseenter', 'points', function(e) {
        // Change the cursor style as a UI indicator.
        map.getCanvas().style.cursor = 'pointer';

        // Populate the popup and set its coordinates
        // based on the feature found.
        popup.setLngLat(e.features[0].geometry.coordinates)
            .setHTML(e.features[0].properties.description)
            .addTo(map);
    });

    map.on('mouseleave', 'points', function() {
        map.getCanvas().style.cursor = '';
        popup.remove();
});


var toggleableLayerIds = [ 'inundaciones', 'laderas', 'dangerZone', 'hospitales', 'points'];
var toggleableLayerNames = ['Inundaciones', 'Laderas', 'Polígono CAP', 'Hospitales', 'Refugios'];

for (var i = 0; i < toggleableLayerIds.length; i++) {
                    var id   = toggleableLayerIds[i];
                    var name = toggleableLayerNames[i];

    var link = document.createElement('a');
    link.href = '#';
    link.className = 'active';
                    link.textContent = id;
                    link.value = id;

    link.onclick = function (e) {
        var clickedLayer = this.value;
        e.preventDefault();
        e.stopPropagation();

        var visibility = map.getLayoutProperty(clickedLayer, 'visibility');

        if (visibility === 'visible') {
            map.setLayoutProperty(clickedLayer, 'visibility', 'none');
            this.className = '';
        } else {
            this.className = 'active';
            map.setLayoutProperty(clickedLayer, 'visibility', 'visible');
        }
    };

                    var layers = document.getElementById('menu');
                    link.textContent = name;
    layers.appendChild(link);
}


</script>

</body>
</html>

