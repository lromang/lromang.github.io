<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title></title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.37.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.37.0/mapbox-gl.css' rel='stylesheet' />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>

  <style>

    #menu {
        background: #fff;
        position: absolute;
        z-index: 1;
        top: 10px;
        right: 10px;
        border-radius: 3px;
        width: 120px;
        border: 1px solid rgba(0,0,0,0.4);
        font-family: 'Open Sans', sans-serif;
    }

    #menu a {
        font-size: 13px;
        color: #404040;
        display: block;
        margin: 0;
        padding: 0;
        padding: 10px;
        text-decoration: none;
        border-bottom: 1px solid rgba(0,0,0,0.25);
        text-align: center;
    }

    #menu a:last-child {
        border: none;
    }

    #menu a:hover {
        background-color: #f8f8f8;
        color: #404040;
    }

    #menu a.active {
        background-color: #3887be;
        color: #ffffff;
    }

    #menu a.active:hover {
        background: #3074a4;
    }

.legend {
    background-color: #fff;
    border-radius: 3px;
    bottom: 30px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.10);
    font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
    padding: 10px;
    position: absolute;
    right: 10px;
    z-index: 1;
}

.legend h4 {
    margin: 0 0 10px;
}

.legend div span {
    border-radius: 50%;
    display: inline-block;
    height: 10px;
    margin-right: 5px;
    width: 10px;
}

.add_info {
    background-color: #fff;
    border-radius: 3px;
    bottom: 30px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.10);
    font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
    padding: 10px;
    position: absolute;
    left: 10px;
    z-index: 1;
}


  </style>

<nav id="menu"></nav>
<div id='map'></div>


<div id='inun-legend' class='legend'>
  <h4>Código de colores</h4>
  <div><span style='background-color: #FFEB3B'></span>Riesgo inundación: ND</div>
  <div><span style='background-color: #FF9800'></span>Riesgo inundación: Medio</div>
  <div><span style='background-color: #D50000'></span>Riesgo inundación: Alto</div>
  <div><span style='background-color: #0D47A1'></span>Riesgo deslizamiento</div>
  <div><span style='background-color: #64DD17'></span>Polígono de riesgo</div>
</div>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiZ29ibXgxNSIsImEiOiJjaWZpaTl2eGtibDBjcnNtN3NqdW1wN25xIn0.yxAJmrmgXO_IaXuI1lckYA';

var v1 = new mapboxgl.LngLat(-96.610786, 19.020803);

var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v9',
    zoom: 5,
    center: v1
});

map.on('load', () => {

//Inundaciones
  map.addSource("inundaciones", {
        "type": "geojson",
        "data": "https://raw.githubusercontent.com/lromang/lromang.github.io/master/huracanes/inter_data/flod_inside.geojson"
  });


   map.addLayer({
'id': 'inundaciones',
        'type': 'fill',
        'source': 'inundaciones',
        'layout': {},
        'paint': {
'fill-color': {
'property': 'VULNERABIL',
'type':'categorical',
stops: [['ND', '#FFEB3B'],
['MEDIA', '#FF9800'],
['ALTA', '#D50000']]
},
            'fill-opacity': 0.6
        }
},'waterway-label');

  map.addLayer({
        'id': 'inundaciones-contorno',
        'type': 'line',
        'source': 'inundaciones',
        'layout': {},
        'paint': {
            'line-color': '#fff',
            'line-width': 1
        }
});


// --------------------------------------------------

//Hospitales
  map.addSource("hospitales", {
        "type": "geojson",
        "data": "https://raw.githubusercontent.com/lromang/lromang.github.io/master/huracanes/inter_data/hospital_inside.geojson"
  });

map.loadImage('https://raw.githubusercontent.com/lromang/lromang.github.io/master/huracanes/images/hospitales.png', (error, image) => {
        if (error) throw error;
        map.addImage('hospital', image);
map.addLayer({
'id': 'hospitales',
'type':'symbol',
'source':'hospitales',
'layout':{"icon-image": "hospital", "icon-size": .09}
})})



// --------------------------------------------------

//Deslizamientos  laderas
  map.addSource("laderas", {
        "type": "geojson",
        "data": "https://raw.githubusercontent.com/lromang/lromang.github.io/master/huracanes/inter_data/glide_inside.geojson"
  });


   map.addLayer({
'id': 'laderas',
        'type': 'fill',
        'source': 'laderas',
        'layout': {},
        'paint': {
            'fill-color': '#0D47A1',
            'fill-opacity': 0.5
        }
});

    map.loadImage('https://raw.githubusercontent.com/lromang/lromang.github.io/master/huracanes/images/refugio_activo.png', (error, image) => {
        if (error) throw error;
        map.addImage('shelter', image);
        map.addLayer({
            "id": "points",
            "type": "symbol",
            "source": {
                "type": "geojson",
                "data": {
                    "type": "FeatureCollection",
                    "features": [

{"type": "Feature","properties":{"id":  0 , "nomin": "iglesia pentecostes" , "tipovial":  "otros" , "nomvial":  "no disponible" , "nomasen":  "" , "nomloc":   "miguel aldama" , "nommun":  "miguel aldama" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>iglesia pentecostes</p><p><strong>Vialidad: </strong>no disponible</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>miguel aldama</p><p><strong>Tipo inmueble: </strong>otros</p>"}, "geometry": { "type": "Point","coordinates": [ -93.13778296 , 17.87293367 ]}},
{"type": "Feature","properties":{"id":  1 , "nomin": "localidad linda vista ii secc." , "tipovial":  "otros" , "nomvial":  "salon de usos multiples de la comunidad cuyo" , "nomasen":  "" , "nomloc":   "cuyo (lvaro obregn)" , "nommun":  "cuyo (lvaro obregn)" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>localidad linda vista ii secc.</p><p><strong>Vialidad: </strong>salon de usos multiples de la comunidad cuyo</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cuyo (lvaro obregn)</p><p><strong>Tipo inmueble: </strong>otros</p>"}, "geometry": { "type": "Point","coordinates": [ -92.01118469 , 17.71402325 ]}},
{"type": "Feature","properties":{"id":  2 , "nomin": "esc prim jaime nuno" , "tipovial":  "escuela" , "nomvial":  "localidad alvaro obregon //" , "nomasen":  "" , "nomloc":   "cuyo (lvaro obregn)" , "nommun":  "cuyo (lvaro obregn)" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>esc prim jaime nuno</p><p><strong>Vialidad: </strong>localidad alvaro obregon //</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cuyo (lvaro obregn)</p><p><strong>Tipo inmueble: </strong>escuela</p>"}, "geometry": { "type": "Point","coordinates": [ -92.011314 , 17.72651622 ]}},
{"type": "Feature","properties":{"id":  3 , "nomin": "escuela primaria justo sierra " , "tipovial":  "escuela" , "nomvial":  "ria. galeana a. seccion " , "nomasen":  "" , "nomloc":   "galeana ra. seccin" , "nommun":  "galeana ra. seccin" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>escuela primaria justo sierra </p><p><strong>Vialidad: </strong>ria. galeana a. seccion </p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>galeana ra. seccin</p><p><strong>Tipo inmueble: </strong>escuela</p>"}, "geometry": { "type": "Point","coordinates": [ -93.15252112 , 17.61150154 ]}},
{"type": "Feature","properties":{"id":  4 , "nomin": "casino del pueblo" , "tipovial":  "otros" , "nomvial":  "el cuyo alvaro obregn" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>casino del pueblo</p><p><strong>Vialidad: </strong>el cuyo alvaro obregn</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>otros</p>"}, "geometry": { "type": "Point","coordinates": [ -92.00843811 , 17.72972072 ]}},
{"type": "Feature","properties":{"id":  5 , "nomin": "escuela prim. dr. belisario palencia" , "tipovial":  "escuela" , "nomvial":  "" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>escuela prim. dr. belisario palencia</p><p><strong>Vialidad: </strong></p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>escuela</p>"}, "geometry": { "type": "Point","coordinates": [ -91.72039043 , 17.68736676 ]}},
{"type": "Feature","properties":{"id":  6 , "nomin": "esc. prim. urbana federal heroes de chapultepec" , "tipovial":  "escuela" , "nomvial":  "av. comitn /abraham lincon y nios heroes" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>esc. prim. urbana federal heroes de chapultepec</p><p><strong>Vialidad: </strong>av. comitn /abraham lincon y nios heroes</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>escuela</p>"}, "geometry": { "type": "Point","coordinates": [ -92.01062735 , 17.72161082 ]}},
{"type": "Feature","properties":{"id":  7 , "nomin": "escuela primaria del estado por la raza" , "tipovial":  "escuela" , "nomvial":  "av. comitn / nios heroes y aldama" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>escuela primaria del estado por la raza</p><p><strong>Vialidad: </strong>av. comitn / nios heroes y aldama</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>escuela</p>"}, "geometry": { "type": "Point","coordinates": [ -92.01474723 , 17.7203027 ]}},
{"type": "Feature","properties":{"id":  8 , "nomin": "escuela secundaria tecnica n " , "tipovial":  "escuela" , "nomvial":  "boulevard tuxtla gutuerrez" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>escuela secundaria tecnica n </p><p><strong>Vialidad: </strong>boulevard tuxtla gutuerrez</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>escuela</p>"}, "geometry": { "type": "Point","coordinates": [ -92.00444754 , 17.72161082 ]}},
{"type": "Feature","properties":{"id":  9 , "nomin": "colegio de bachilleres de chiapas plantel n" , "tipovial":  "otros" , "nomvial":  "av. motolina" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>colegio de bachilleres de chiapas plantel n</p><p><strong>Vialidad: </strong>av. motolina</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>otros</p>"}, "geometry": { "type": "Point","coordinates": [ -92.01225814 , 17.72418618 ]}},
{"type": "Feature","properties":{"id":  10 , "nomin": "universidad maya (unach)" , "tipovial":  "otros" , "nomvial":  "carret. catazaja-pq" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>universidad maya (unach)</p><p><strong>Vialidad: </strong>carret. catazaja-pq</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>otros</p>"}, "geometry": { "type": "Point","coordinates": [ -92.01337394 , 17.72291894 ]}},
{"type": "Feature","properties":{"id":  11 , "nomin": "esc. prof. miguel salas anzures" , "tipovial":  "escuela" , "nomvial":  "r/a boca rio chico" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>esc. prof. miguel salas anzures</p><p><strong>Vialidad: </strong>r/a boca rio chico</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>escuela</p>"}, "geometry": { "type": "Point","coordinates": [ -92.01612052 , 17.71964863 ]}},
{"type": "Feature","properties":{"id":  12 , "nomin": "escuela cuauhtemoc" , "tipovial":  "escuela" , "nomvial":  "cuyo santa cruz" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>escuela cuauhtemoc</p><p><strong>Vialidad: </strong>cuyo santa cruz</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>escuela</p>"}, "geometry": { "type": "Point","coordinates": [ -92.00444754 , 17.723573 ]}},
{"type": "Feature","properties":{"id":  13 , "nomin": "escuela emilio rabasa" , "tipovial":  "escuela" , "nomvial":  "san agustin" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>escuela emilio rabasa</p><p><strong>Vialidad: </strong>san agustin</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>escuela</p>"}, "geometry": { "type": "Point","coordinates": [ -92.01543387 , 17.72161082 ]}},
{"type": "Feature","properties":{"id":  14 , "nomin": "centro social " , "tipovial":  "otros" , "nomvial":  "benito juarez col. centro" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>centro social </p><p><strong>Vialidad: </strong>benito juarez col. centro</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>otros</p>"}, "geometry": { "type": "Point","coordinates": [ -93.17930029 , 17.60692024 ]}},
{"type": "Feature","properties":{"id":  15 , "nomin": "palapa de la iglesia catlica " , "tipovial":  "otros" , "nomvial":  "c. reforma int. s/n " , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>palapa de la iglesia catlica </p><p><strong>Vialidad: </strong>c. reforma int. s/n </p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>otros</p>"}, "geometry": { "type": "Point","coordinates": [ -93.17518042 , 17.61084708 ]}},
{"type": "Feature","properties":{"id":  16 , "nomin": "asilo de ancianos" , "tipovial":  "otros" , "nomvial":  "cabecera municipal" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>asilo de ancianos</p><p><strong>Vialidad: </strong>cabecera municipal</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>otros</p>"}, "geometry": { "type": "Point","coordinates": [ -93.17586706 , 17.61150154 ]}},
{"type": "Feature","properties":{"id":  17 , "nomin": "palacio municipal" , "tipovial":  "otros" , "nomvial":  "calle central entre av. central norte y ra. avenida sur" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>palacio municipal</p><p><strong>Vialidad: </strong>calle central entre av. central norte y ra. avenida sur</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>otros</p>"}, "geometry": { "type": "Point","coordinates": [ -91.72039043 , 17.68736676 ]}},
{"type": "Feature","properties":{"id":  18 , "nomin": "dif y casa dia" , "tipovial":  "casa" , "nomvial":  "colonia chacamax" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>dif y casa dia</p><p><strong>Vialidad: </strong>colonia chacamax</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>casa</p>"}, "geometry": { "type": "Point","coordinates": [ -91.72039043 , 17.68736676 ]}},
{"type": "Feature","properties":{"id":  19 , "nomin": "auditorio ganadero" , "tipovial":  "auditorio" , "nomvial":  "av. central entre calle central" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>auditorio ganadero</p><p><strong>Vialidad: </strong>av. central entre calle central</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>auditorio</p>"}, "geometry": { "type": "Point","coordinates": [ -91.72039043 , 17.68736676 ]}},
{"type": "Feature","properties":{"id":  20 , "nomin": "casino del pueblo" , "tipovial":  "otros" , "nomvial":  "ta. avenida sur entre ra. y ta. poniente norte" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>casino del pueblo</p><p><strong>Vialidad: </strong>ta. avenida sur entre ra. y ta. poniente norte</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>otros</p>"}, "geometry": { "type": "Point","coordinates": [ -91.72039043 , 17.68736676 ]}},
{"type": "Feature","properties":{"id":  21 , "nomin": "centro de salud" , "tipovial":  "otros" , "nomvial":  "calle ra. avenida sur entre . y ra. poniente norte" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>centro de salud</p><p><strong>Vialidad: </strong>calle ra. avenida sur entre . y ra. poniente norte</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>otros</p>"}, "geometry": { "type": "Point","coordinates": [ -91.72039043 , 17.68736676 ]}},
{"type": "Feature","properties":{"id":  22 , "nomin": "escuela prim. dr. belisario palencia" , "tipovial":  "escuela" , "nomvial":  "calle da. poniente, col. centro" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>escuela prim. dr. belisario palencia</p><p><strong>Vialidad: </strong>calle da. poniente, col. centro</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>escuela</p>"}, "geometry": { "type": "Point","coordinates": [ -91.72039043 , 17.68736676 ]}},
{"type": "Feature","properties":{"id":  23 , "nomin": "auditorio ganadero" , "tipovial":  "auditorio" , "nomvial":  "miguel aleman" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>auditorio ganadero</p><p><strong>Vialidad: </strong>miguel aleman</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>auditorio</p>"}, "geometry": { "type": "Point","coordinates": [ -93.18273352 , 17.61477382 ]}},
{"type": "Feature","properties":{"id":  24 , "nomin": "escuela primaria federal dr. belisario dominguez" , "tipovial":  "escuela" , "nomvial":  "miguel aleman" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>escuela primaria federal dr. belisario dominguez</p><p><strong>Vialidad: </strong>miguel aleman</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>escuela</p>"}, "geometry": { "type": "Point","coordinates": [ -93.18136023 , 17.61019261 ]}},
{"type": "Feature","properties":{"id":  25 , "nomin": "escuela primaria federal dr. belisario dominguez (anexo)" , "tipovial":  "escuela" , "nomvial":  "hidalgo" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>escuela primaria federal dr. belisario dominguez (anexo)</p><p><strong>Vialidad: </strong>hidalgo</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>escuela</p>"}, "geometry": { "type": "Point","coordinates": [ -93.16968725 , 17.612156 ]}},
{"type": "Feature","properties":{"id":  26 , "nomin": "escuela secundaria tecnica no. " , "tipovial":  "escuela" , "nomvial":  "blvd. benito juarez" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>escuela secundaria tecnica no. </p><p><strong>Vialidad: </strong>blvd. benito juarez</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>escuela</p>"}, "geometry": { "type": "Point","coordinates": [ -93.180674 , 17.609538 ]}},
{"type": "Feature","properties":{"id":  27 , "nomin": "ganadera local" , "tipovial":  "otros" , "nomvial":  "c. miguel alemn y av. dr. belisario dominguez " , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>ganadera local</p><p><strong>Vialidad: </strong>c. miguel alemn y av. dr. belisario dominguez </p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>otros</p>"}, "geometry": { "type": "Point","coordinates": [ -93.17655371 , 17.61150154 ]}},
{"type": "Feature","properties":{"id":  28 , "nomin": "cobach plantel nuevo xochimilco" , "tipovial":  "otros" , "nomvial":  "no aplica" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>cobach plantel nuevo xochimilco</p><p><strong>Vialidad: </strong>no aplica</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>otros</p>"}, "geometry": { "type": "Point","coordinates": [ -93.17586706 , 17.61150154 ]}},
{"type": "Feature","properties":{"id":  29 , "nomin": "unidad municipal de proteccin civil" , "tipovial":  "otros" , "nomvial":  "cabecera municipal" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>unidad municipal de proteccin civil</p><p><strong>Vialidad: </strong>cabecera municipal</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>otros</p>"}, "geometry": { "type": "Point","coordinates": [ -91.98577881 , 17.51899899 ]}},
{"type": "Feature","properties":{"id":  30 , "nomin": "casino municipal" , "tipovial":  "otros" , "nomvial":  "cabecera municipal" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>casino municipal</p><p><strong>Vialidad: </strong>cabecera municipal</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>otros</p>"}, "geometry": { "type": "Point","coordinates": [ -93.15170288 , 17.85394369 ]}},
{"type": "Feature","properties":{"id":  31 , "nomin": "auditorio municipal" , "tipovial":  "auditorio" , "nomvial":  "juspil carr. juarez, gpe. victoria" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>auditorio municipal</p><p><strong>Vialidad: </strong>juspil carr. juarez, gpe. victoria</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>auditorio</p>"}, "geometry": { "type": "Point","coordinates": [ -93.14052954 , 17.86639847 ]}},
{"type": "Feature","properties":{"id":  32 , "nomin": "casa de la cultura" , "tipovial":  "casa" , "nomvial":  "cabecera municipal" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>casa de la cultura</p><p><strong>Vialidad: </strong>cabecera municipal</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>casa</p>"}, "geometry": { "type": "Point","coordinates": [ -93.147396 , 17.8650914 ]}},
{"type": "Feature","properties":{"id":  33 , "nomin": "centro social reforma " , "tipovial":  "otros" , "nomvial":  "col. reforma" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>centro social reforma </p><p><strong>Vialidad: </strong>col. reforma</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>otros</p>"}, "geometry": { "type": "Point","coordinates": [ -93.13778296 , 17.86639847 ]}},
{"type": "Feature","properties":{"id":  34 , "nomin": "esc. sec. tec. no. " , "tipovial":  "escuela" , "nomvial":  "av. baja california s/n zona " , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>esc. sec. tec. no. </p><p><strong>Vialidad: </strong>av. baja california s/n zona </p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>escuela</p>"}, "geometry": { "type": "Point","coordinates": [ -93.13709632 , 17.86901258 ]}},
{"type": "Feature","properties":{"id":  35 , "nomin": "sec. federal " , "tipovial":  "otros" , "nomvial":  "libramiento no. " , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>sec. federal </p><p><strong>Vialidad: </strong>libramiento no. </p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>otros</p>"}, "geometry": { "type": "Point","coordinates": [ -93.14327613 , 17.87293367 ]}},
{"type": "Feature","properties":{"id":  36 , "nomin": "cobach " , "tipovial":  "otros" , "nomvial":  "cab. municipal" , "nomasen":  "" , "nomloc":   "cabecera municipal" , "nommun":  "cabecera municipal" , "noment":  "chiapas" , "description": "<h1>Refugio</h1><hr><p><strong>Nombre: </strong>cobach </p><p><strong>Vialidad: </strong>cab. municipal</p><p><strong>Asentamiento: </strong></p><p><strong>Localidad: </strong>cabecera municipal</p><p><strong>Tipo inmueble: </strong>otros</p>"}, "geometry": { "type": "Point","coordinates": [ -93.1398429 , 17.87097313 ]}}
]}},"layout": {"icon-image": "shelter", "icon-size": .15}});});
map.addLayer({
        "id": "dangerZone","type": "fill","source": {"type": "geojson", "data": {"type": "Feature","geometry": {"type": "Polygon","coordinates":[[
[-93.71337890625,17.602139123350838],
[-91.03271484375,17.308687886770034],
[-90.72509765625,17.936928637549446],
[-89.27490234375,17.769612247142653],
[-88.87939453125,19.80805412808859],
[-87.42919921875,21.24842223562701],
[-88.08837890625,21.616579336740607],
[-90.15380859375,21.207458730482642],
[-91.25244140625,18.979025953255267],
[-93.93310546875,18.35452552912664],
[-93.71337890625,17.602139123350838]
]]}}},"layout": {},"paint": {"fill-color": "#64DD17","fill-opacity": 0.4}});});

var popup = new mapboxgl.Popup({
        closeButton: false,
        closeOnClick: false
    });

map.on('mouseenter', 'hospitales', function(e){
map.getCanvas().style.cursor = 'pointer';
popup.setLngLat(e.features[0].geometry.coordinates)
.setHTML('<h1>Hospital</h1><hr><p><strong>Nombre establecimiento: </strong>' + e.features[0].properties.nom_estab + '</p><p><strong>Capacidad: </strong>' + e.features[0].properties.per_ocu + '</p><p><strong>Tipo asentamiento: </strong>' + e.features[0].properties.tipo_asent + '</p><p><strong>Nombre asentamiento: </strong>' + e.features[0].properties.nomb_asent + '</p><p><strong>Nombre vialidad: </strong>' + e.features[0].properties.nom_vial + '</p><p><strong>Número exterior: </strong>' +  e.features[0].properties.numero_ext + '</p><p><strong>Teléfono: </strong>' + e.features[0].properties.telefono + '</p>')
.addTo(map);
});

map.on('mouseleave', 'hospitales', function(){
        map.getCanvas().style.cursor = '';
        popup.remove();
})

    map.on('mouseenter', 'points', function(e) {
        // Change the cursor style as a UI indicator.
        map.getCanvas().style.cursor = 'pointer';

        // Populate the popup and set its coordinates
        // based on the feature found.
        popup.setLngLat(e.features[0].geometry.coordinates)
            .setHTML(e.features[0].properties.description)
            .addTo(map);
    });

    map.on('mouseleave', 'points', function() {
        map.getCanvas().style.cursor = '';
        popup.remove();
});


var toggleableLayerIds = [ 'inundaciones', 'laderas', 'dangerZone', 'hospitales', 'points'];
var toggleableLayerNames = ['Inundaciones', 'Laderas', 'Polígono riesgo', 'Hospitales', 'Refugios'];

for (var i = 0; i < toggleableLayerIds.length; i++) {
                    var id   = toggleableLayerIds[i];
                    var name = toggleableLayerNames[i];

    var link = document.createElement('a');
    link.href = '#';
    link.className = 'active';
                    link.textContent = id;
                    link.value = id;

    link.onclick = function (e) {
        var clickedLayer = this.value;
        e.preventDefault();
        e.stopPropagation();

        var visibility = map.getLayoutProperty(clickedLayer, 'visibility');

        if (visibility === 'visible') {
            map.setLayoutProperty(clickedLayer, 'visibility', 'none');
            this.className = '';
        } else {
            this.className = 'active';
            map.setLayoutProperty(clickedLayer, 'visibility', 'visible');
        }
    };

                    var layers = document.getElementById('menu');
                    link.textContent = name;
    layers.appendChild(link);
}


</script>

</body>
</html>

