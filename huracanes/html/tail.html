
var popup = new mapboxgl.Popup({
        closeButton: false,
        closeOnClick: false
    });

map.on('mouseenter', 'hospitales', function(e){
map.getCanvas().style.cursor = 'pointer';
popup.setLngLat(e.features[0].geometry.coordinates)
.setHTML('<h1>Hospital</h1><hr><p><strong>Nombre establecimiento: </strong>' + e.features[0].properties.nom_estab + '</p><p><strong>Capacidad: </strong>' + e.features[0].properties.per_ocu + '</p><p><strong>Tipo asentamiento: </strong>' + e.features[0].properties.tipo_asent + '</p><p><strong>Nombre asentamiento: </strong>' + e.features[0].properties.nomb_asent + '</p><p><strong>Nombre vialidad: </strong>' + e.features[0].properties.nom_vial + '</p><p><strong>Número exterior: </strong>' +  e.features[0].properties.numero_ext + '</p><p><strong>Teléfono: </strong>' + e.features[0].properties.telefono + '</p>')
.addTo(map);
});

map.on('mouseleave', 'hospitales', function(){
        map.getCanvas().style.cursor = '';
        popup.remove();
})

    map.on('mouseenter', 'points', function(e) {
        // Change the cursor style as a UI indicator.
        map.getCanvas().style.cursor = 'pointer';

        // Populate the popup and set its coordinates
        // based on the feature found.
        popup.setLngLat(e.features[0].geometry.coordinates)
            .setHTML(e.features[0].properties.description)
            .addTo(map);
    });

    map.on('mouseleave', 'points', function() {
        map.getCanvas().style.cursor = '';
        popup.remove();
});


var toggleableLayerIds = [ 'inundaciones', 'laderas', 'dangerZone', 'hospitales', 'points'];
var toggleableLayerNames = ['Inundaciones', 'Laderas', 'Polígono riesgo', 'Hospitales', 'Refugios'];

for (var i = 0; i < toggleableLayerIds.length; i++) {
                    var id   = toggleableLayerIds[i];
                    var name = toggleableLayerNames[i];

    var link = document.createElement('a');
    link.href = '#';
    link.className = 'active';
                    link.textContent = id;
                    link.value = id;

    link.onclick = function (e) {
        var clickedLayer = this.value;
        e.preventDefault();
        e.stopPropagation();

        var visibility = map.getLayoutProperty(clickedLayer, 'visibility');

        if (visibility === 'visible') {
            map.setLayoutProperty(clickedLayer, 'visibility', 'none');
            this.className = '';
        } else {
            this.className = 'active';
            map.setLayoutProperty(clickedLayer, 'visibility', 'visible');
        }
    };

                    var layers = document.getElementById('menu');
                    link.textContent = name;
    layers.appendChild(link);
}


</script>

</body>
</html>

